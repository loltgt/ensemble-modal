/*!
 * loltgt ensemble.Modal
 *
 * @version 0.0.1
 * @copyright Copyright (C) Leonardo Laureti
 * @license MIT License
 */
"use strict";!function(t,s,e,o){const i=o?o.base:e("../ensemble-stack-d1/base");class n extends i{_defaults(){return{ns:"modal",root:"body",fx:!0,windowed:!1,cloning:!0,backClose:!1,keyboard:!0,close:{onclick:this.close,innerText:"Ã—",ariaLabel:"Close"},onOpen:function(){},onClose:function(){},onShow:function(){},onHide:function(){},onContent:function(){}}}_bindings(){this.open=this.binds(this.open),this.close=this.binds(this.close),this.backx=this.binds(this.backx),this.keyboard=this.binds(this.keyboard)}constructor(t,s={}){super(),this._bindings(),this.options=this.defaults(this._defaults(),s),Object.freeze(this.options),this.element=t}generator(){const t=this.options,s=this.box=this.compo("dialog",!0,{className:t.ns,hidden:!0,ariaModal:!0,role:"dialog",onclick:t.backClose?this.backx:null}),e=this.cnt=this.compo("content"),o=this.compo("button","close",t.close);return s.append(e),t.windowed?(s.classList.add(t.ns+"-windowed"),e.append(o)):s.append(o),t.fx&&s.classList.add(t.ns+"-fx"),this.root=this.selector(t.root),this.built=!0,s}populate(t){const s=this.content(this.element);this.cnt.append(s)}resume(t){console.log("resume",t)}content(t,s){const e=this.options,o=this.compo("object");let i=(s=void 0!==s?s:e.cloning)?this.cloneNode(t,!0):t;return e.onContent.call(this,this,o,i),i&&o.inject(i),o}destroy(){this.box.remove(),this.built=!1}open(t,s){if(this.event(t),this.opened)return;const e=this.options;this.built?this.resume(s):(this.generator(),this.populate(s)),this.opened=!0,e.onOpen.call(this,this,s,t),this.show(s),e.keyboard&&this.event("keydown").add(this.keyboard),console.log("open",this)}close(t,s){if(this.event(t),!this.opened)return;const e=this.options;this.opened=!1,e.onClose.call(this,this,s,t),this.hide(s),e.keyboard&&this.event("keydown").remove(this.keyboard),console.log("close",this)}show(t){const s=this.options,e=this.root,o=this.box;o.install(e),this.delay((function(){o.show(),s.onShow.call(self,self,t)}))}hide(t){const s=this.options,e=this.root,o=this.box;o.hide(),this.delay((function(){o.uninstall(e),s.onHide.call(self,self,t)}),o,300)}backx(t){this.event(t),t.target!=this.box&&t.target!=this.cnt||this.close(t)}keyboard(t){this.event(t);27===(t.keyCode||0)&&this.close(t)}}t.ensemble={...o,Modal:n},s.exports=n}("undefined"!=typeof window?window:{},"undefined"!=typeof module?module:{},"undefined"!=typeof require?require:function(){},globalThis.ensemble);
//# sourceMappingURL=ensemble-modal.min.js.map
